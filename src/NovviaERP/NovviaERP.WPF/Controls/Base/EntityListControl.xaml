<UserControl x:Class="NovviaERP.WPF.Controls.Base.EntityListControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:base="clr-namespace:NovviaERP.WPF.Controls.Base">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Filter-Leiste (Aktualisierung nur bei Suche!) -->
        <base:FilterBarControl x:Name="filterBar"
                               SucheGestartet="FilterBar_SucheGestartet"
                               NeuGeklickt="FilterBar_NeuGeklickt"/>

        <!-- DataGrid -->
        <DataGrid x:Name="dgItems" Grid.Row="1"
                  AutoGenerateColumns="False" IsReadOnly="True"
                  SelectionMode="Single" CanUserSortColumns="True"
                  BorderThickness="0" RowHeight="32"
                  GridLinesVisibility="Horizontal"
                  AlternatingRowBackground="#fafafa"
                  SelectionChanged="DgItems_SelectionChanged"
                  MouseDoubleClick="DgItems_DoubleClick">
            <DataGrid.RowStyle>
                <Style TargetType="DataGridRow">
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="#e3f2fd"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.RowStyle>
        </DataGrid>

        <!-- Status-Leiste unten -->
        <Border Grid.Row="2" Background="#f8f9fa" BorderBrush="#ddd" BorderThickness="0,1,0,0" Padding="15,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Status Text -->
                <TextBlock x:Name="txtStatus" VerticalAlignment="Center" Foreground="#666"/>

                <!-- Aktions-Buttons -->
                <StackPanel x:Name="pnlActions" Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="btnBearbeiten" Content="Bearbeiten" Padding="15,8" Margin="0,0,10,0"
                            Click="Bearbeiten_Click" IsEnabled="False"/>
                    <Button x:Name="btnLoeschen" Content="Loeschen" Padding="15,8"
                            Click="Loeschen_Click" IsEnabled="False" Visibility="Collapsed"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Loading Overlay -->
        <Border x:Name="loadingOverlay" Grid.RowSpan="3" Background="#80FFFFFF" Visibility="Collapsed">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <ProgressBar IsIndeterminate="True" Width="200" Height="4"/>
                <TextBlock Text="Laden..." Margin="0,10,0,0" HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
