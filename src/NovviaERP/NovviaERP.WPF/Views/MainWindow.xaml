<Window x:Class="NovviaERP.WPF.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="NOVVIA ERP" Height="800" Width="1400"
        WindowStartupLocation="CenterScreen" WindowState="Maximized"
        Background="#F0F0F0">

    <Window.Resources>
        <Style x:Key="NavButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#CCC"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Left"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3E3E42"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Status-Untermenü Button Style -->
        <Style x:Key="StatusSubButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#AAA"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="24,4,12,4"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Left"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3E3E42"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="sidebarColumn" Width="220" MinWidth="100"/>
            <ColumnDefinition Width="8"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Top Bar -->
        <Border Grid.Row="0" Grid.ColumnSpan="3" Background="#0078D4" Padding="15,10">
            <Grid>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="NOVVIA ERP" FontSize="20" FontWeight="Light" Foreground="White"/>
                    <TextBlock Text=" | " Foreground="#80FFFFFF" FontSize="20" Margin="10,0"/>
                    <TextBlock x:Name="txtMandant" Text="Mandant" FontSize="16" Foreground="White"
                               VerticalAlignment="Center"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <TextBlock x:Name="txtBenutzer" Text="Benutzer" Foreground="White"
                               VerticalAlignment="Center" Margin="0,0,15,0"/>
                    <Button Content="Abmelden" Background="Transparent" Foreground="White"
                            BorderThickness="0" Padding="10,5" Cursor="Hand"
                            Click="BtnAbmelden_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Sidebar Navigation -->
        <Border Grid.Row="1" Grid.Column="0" Background="#2D2D30">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="0,5">
                    <Button Style="{StaticResource NavButton}" Content="Dashboard" FontWeight="Bold"
                            Foreground="#4FC3F7" Click="NavDashboard_Click"/>

                    <TextBlock Text="STAMMDATEN" Foreground="#888" FontSize="9" Margin="12,10,0,3"/>
                    <Button Style="{StaticResource NavButton}" Content="Kunden" Click="NavKunden_Click"/>
                    <Button Style="{StaticResource NavButton}" Content="Artikel" Click="NavArtikel_Click"/>

                    <TextBlock Text="VERKAUF" Foreground="#888" FontSize="9" Margin="12,10,0,3"/>

                    <!-- Aufträge mit aufklappbarem Status-Menü -->
                    <Button Style="{StaticResource NavButton}" Content="▶ Auftraege" x:Name="btnAuftraege" Click="NavBestellungen_Click"/>
                    <StackPanel x:Name="pnlAuftraegeStatus" Visibility="Collapsed">
                        <Button Style="{StaticResource StatusSubButton}" Tag="" Click="NavAuftragStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#6c757d" Margin="0,0,6,0"/>
                                <TextBlock Text="Alle"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="Offen" Click="NavAuftragStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#ffc107" Margin="0,0,6,0"/>
                                <TextBlock Text="Offen"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="In Bearbeitung" Click="NavAuftragStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#17a2b8" Margin="0,0,6,0"/>
                                <TextBlock Text="In Bearbeitung"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="Bezahlt" Click="NavAuftragStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#28a745" Margin="0,0,6,0"/>
                                <TextBlock Text="Bezahlt"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="Versendet" Click="NavAuftragStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#007bff" Margin="0,0,6,0"/>
                                <TextBlock Text="Versendet"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="Storniert" Click="NavAuftragStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#dc3545" Margin="0,0,6,0"/>
                                <TextBlock Text="Storniert"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>

                    <!-- Rechnungen mit aufklappbarem Status-Menü -->
                    <Button Style="{StaticResource NavButton}" Content="▶ Rechnungen" x:Name="btnRechnungen" Click="NavRechnungen_Click"/>
                    <StackPanel x:Name="pnlRechnungenStatus" Visibility="Collapsed">
                        <Button Style="{StaticResource StatusSubButton}" Tag="" Click="NavRechnungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#6c757d" Margin="0,0,6,0"/>
                                <TextBlock Text="Alle"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="Offen" Click="NavRechnungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#ffc107" Margin="0,0,6,0"/>
                                <TextBlock Text="Offen"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="Teilbezahlt" Click="NavRechnungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#17a2b8" Margin="0,0,6,0"/>
                                <TextBlock Text="Teilbezahlt"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="Bezahlt" Click="NavRechnungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#28a745" Margin="0,0,6,0"/>
                                <TextBlock Text="Bezahlt"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="Ueberfaellig" Click="NavRechnungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#dc3545" Margin="0,0,6,0"/>
                                <TextBlock Text="Überfällig"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="Storniert" Click="NavRechnungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#6c757d" Margin="0,0,6,0"/>
                                <TextBlock Text="Storniert"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>

                    <!-- Rechnungskorrekturen mit aufklappbarem Status-Menü -->
                    <Button Style="{StaticResource NavButton}" Content="▶ Rechnungskorrekturen" x:Name="btnRechnungskorrekturen" Click="NavRechnungskorrekturen_Click"/>
                    <StackPanel x:Name="pnlRechnungskorrekturenStatus" Visibility="Collapsed">
                        <Button Style="{StaticResource StatusSubButton}" Tag="" Click="NavRechnungskorrekturStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#6c757d" Margin="0,0,6,0"/>
                                <TextBlock Text="Alle"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="Offen" Click="NavRechnungskorrekturStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#ffc107" Margin="0,0,6,0"/>
                                <TextBlock Text="Offen"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="Ausgeglichen" Click="NavRechnungskorrekturStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#28a745" Margin="0,0,6,0"/>
                                <TextBlock Text="Ausgeglichen"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="Storniert" Click="NavRechnungskorrekturStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#dc3545" Margin="0,0,6,0"/>
                                <TextBlock Text="Storniert"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>

                    <TextBlock Text="EINKAUF" Foreground="#888" FontSize="9" Margin="12,10,0,3"/>
                    <Button Style="{StaticResource NavButton}" Content="Lieferanten" Click="NavLieferanten_Click"/>

                    <!-- Lieferantenbestellungen mit aufklappbarem Status-Menü -->
                    <Button Style="{StaticResource NavButton}" Content="▶ Bestellungen" x:Name="btnLieferantenBestellungen" Click="NavLieferantenBestellungen_Click"/>
                    <StackPanel x:Name="pnlLieferantenBestellungenStatus" Visibility="Collapsed">
                        <Button Style="{StaticResource StatusSubButton}" Tag="" Click="NavLieferantenBestellungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#6c757d" Margin="0,0,6,0"/>
                                <TextBlock Text="Alle"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="5" Click="NavLieferantenBestellungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#9e9e9e" Margin="0,0,6,0"/>
                                <TextBlock Text="Entwurf"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="100" Click="NavLieferantenBestellungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#ffc107" Margin="0,0,6,0"/>
                                <TextBlock Text="Offen"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="200" Click="NavLieferantenBestellungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#2196f3" Margin="0,0,6,0"/>
                                <TextBlock Text="Bestellt"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="300" Click="NavLieferantenBestellungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#9c27b0" Margin="0,0,6,0"/>
                                <TextBlock Text="Teilgeliefert"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="400" Click="NavLieferantenBestellungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#4caf50" Margin="0,0,6,0"/>
                                <TextBlock Text="Geliefert"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="500" Click="NavLieferantenBestellungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#28a745" Margin="0,0,6,0"/>
                                <TextBlock Text="Abgeschlossen"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="600" Click="NavLieferantenBestellungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#dc3545" Margin="0,0,6,0"/>
                                <TextBlock Text="Storniert"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>

                    <!-- Eingangsrechnungen mit aufklappbarem Status-Menü -->
                    <Button Style="{StaticResource NavButton}" Content="▶ Eingangsrechnungen" x:Name="btnEingangsrechnungen" Click="NavEingangsrechnungen_Click"/>
                    <StackPanel x:Name="pnlEingangsrechnungenStatus" Visibility="Collapsed">
                        <Button Style="{StaticResource StatusSubButton}" Tag="" Click="NavEingangsrechnungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#6c757d" Margin="0,0,6,0"/>
                                <TextBlock Text="Alle"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="0" Click="NavEingangsrechnungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#ffc107" Margin="0,0,6,0"/>
                                <TextBlock Text="Offen"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="1" Click="NavEingangsrechnungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#17a2b8" Margin="0,0,6,0"/>
                                <TextBlock Text="Geprueft"/>
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource StatusSubButton}" Tag="2" Click="NavEingangsrechnungStatus_Click">
                            <StackPanel Orientation="Horizontal">
                                <Border Width="8" Height="8" CornerRadius="4" Background="#28a745" Margin="0,0,6,0"/>
                                <TextBlock Text="Bezahlt"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>

                    <Button Style="{StaticResource NavButton}" Content="EDIFACT (EDI)" Click="NavEdifact_Click"/>

                    <TextBlock Text="LOGISTIK" Foreground="#888" FontSize="9" Margin="12,10,0,3"/>
                    <Button Style="{StaticResource NavButton}" Content="Lager" Click="NavLager_Click"/>
                    <Button Style="{StaticResource NavButton}" Content="Chargen" Click="NavChargen_Click"/>
                    <Button Style="{StaticResource NavButton}" Content="Versand" Click="NavVersand_Click"/>

                    <TextBlock Text="FINANZEN" Foreground="#888" FontSize="9" Margin="12,10,0,3"/>
                    <Button Style="{StaticResource NavButton}" Content="Zahlungsabgleich" Click="NavZahlungsabgleich_Click"/>

                    <TextBlock Text="AUTOMATISIERUNG" Foreground="#888" FontSize="9" Margin="12,10,0,3"/>
                    <Button Style="{StaticResource NavButton}" Content="Workflows" Click="NavWorkflow_Click"/>

                    <TextBlock Text="TOOLS" Foreground="#888" FontSize="9" Margin="12,10,0,3"/>
                    <Button Style="{StaticResource NavButton}" Content="Formular-Designer" Click="NavFormularDesigner_Click"/>
                    <Button Style="{StaticResource NavButton}" Content="Textmeldungen" Click="NavTextmeldungen_Click"/>
                    <Button Style="{StaticResource NavButton}" Content="Ameise (Import/Export)" Click="NavAmeise_Click"/>

                    <TextBlock Text="SYSTEM" Foreground="#888" FontSize="9" Margin="12,10,0,3"/>
                    <Button Style="{StaticResource NavButton}" Content="Einstellungen" Click="NavEinstellungen_Click"/>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Vertikaler Splitter fuer Sidebar -->
        <GridSplitter x:Name="sidebarSplitter" Grid.Row="1" Grid.Column="1" Width="8" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                      Background="#1E1E1E" Cursor="SizeWE"
                      ResizeDirection="Columns" ResizeBehavior="PreviousAndNext"
                      ShowsPreview="True" Focusable="False" Panel.ZIndex="100"
                      DragCompleted="SidebarSplitter_DragCompleted"/>

        <!-- Main Content -->
        <ContentControl Grid.Row="1" Grid.Column="2" x:Name="contentMain"/>

        <!-- Status Bar -->
        <Border Grid.Row="2" Grid.ColumnSpan="3" Background="#1E1E1E" Padding="15,8">
            <StackPanel Orientation="Horizontal">
                <Ellipse Width="8" Height="8" Fill="LimeGreen" VerticalAlignment="Center"/>
                <TextBlock Text="Verbunden" Foreground="#888" Margin="8,0,0,0" FontSize="11"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
