<Window x:Class="NovviaERP.WPF.Views.AngebotDetailDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Angebot" Height="700" Width="1000"
        WindowStartupLocation="CenterOwner" Background="#F5F5F5">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <TextBlock Grid.Row="0" Text="ðŸ“‹ Angebot" FontSize="22" FontWeight="Light" Margin="0,0,0,20"/>
        
        <!-- Kopfdaten -->
        <Border Grid.Row="1" Background="White" CornerRadius="8" Padding="20" Margin="0,0,0,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <StackPanel Margin="0,0,10,10">
                    <TextBlock Text="Angebots-Nr." FontSize="11" Foreground="#666"/>
                    <TextBox x:Name="txtAngebotNr" IsReadOnly="True" Background="#F5F5F5"/>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Margin="10,0,10,10">
                    <TextBlock Text="Datum" FontSize="11" Foreground="#666"/>
                    <DatePicker x:Name="dpDatum"/>
                </StackPanel>
                
                <StackPanel Grid.Column="2" Margin="10,0,10,10">
                    <TextBlock Text="GÃ¼ltig bis" FontSize="11" Foreground="#666"/>
                    <DatePicker x:Name="dpGueltigBis"/>
                </StackPanel>
                
                <StackPanel Grid.Column="3" Margin="10,0,0,10">
                    <TextBlock Text="Status" FontSize="11" Foreground="#666"/>
                    <ComboBox x:Name="cbStatus">
                        <ComboBoxItem Content="Offen" Tag="0"/>
                        <ComboBoxItem Content="Versendet" Tag="1"/>
                        <ComboBoxItem Content="Nachfassen" Tag="2"/>
                        <ComboBoxItem Content="Abgelehnt" Tag="4"/>
                    </ComboBox>
                </StackPanel>
                
                <StackPanel Grid.Row="1" Grid.ColumnSpan="2" Margin="0,0,10,0">
                    <TextBlock Text="Kunde" FontSize="11" Foreground="#666"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <ComboBox x:Name="cbKunde" IsEditable="True"/>
                        <Button Grid.Column="1" Content="..." Width="30" Margin="5,0,0,0" Click="BtnKundeWaehlen_Click"/>
                    </Grid>
                </StackPanel>
                
                <StackPanel Grid.Row="1" Grid.Column="2" Grid.ColumnSpan="2" Margin="10,0,0,0">
                    <TextBlock Text="Bemerkung" FontSize="11" Foreground="#666"/>
                    <TextBox x:Name="txtBemerkung"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Positionen -->
        <Border Grid.Row="2" Background="White" CornerRadius="8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <Border Background="#F5F5F5" Padding="15" CornerRadius="8,8,0,0">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Positionen" FontWeight="SemiBold"/>
                        <Button Content="+ Position" Width="100" Height="26" Margin="20,0,0,0" Click="BtnPositionHinzufuegen_Click"/>
                    </StackPanel>
                </Border>
                
                <DataGrid Grid.Row="1" x:Name="dgPositionen" AutoGenerateColumns="False" 
                          CanUserAddRows="False" BorderThickness="0">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Pos" Binding="{Binding PosNr}" Width="40" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Art.Nr." Binding="{Binding ArtNr}" Width="100"/>
                        <DataGridTextColumn Header="Bezeichnung" Binding="{Binding Name}" Width="*"/>
                        <DataGridTextColumn Header="Menge" Binding="{Binding Menge}" Width="70"/>
                        <DataGridTextColumn Header="Einheit" Binding="{Binding Einheit}" Width="60"/>
                        <DataGridTextColumn Header="Einzelpreis" Binding="{Binding Einzelpreis, StringFormat=N2}" Width="90"/>
                        <DataGridTextColumn Header="Rabatt %" Binding="{Binding Rabatt}" Width="70"/>
                        <DataGridTextColumn Header="MwSt %" Binding="{Binding MwStSatz}" Width="70"/>
                        <DataGridTextColumn Header="Gesamt" Binding="{Binding Gesamt, StringFormat=N2}" Width="90" IsReadOnly="True"/>
                        <DataGridTemplateColumn Width="40">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="ðŸ—‘ï¸" Width="28" Click="BtnPositionLoeschen_Click"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>
        
        <!-- Summen -->
        <Border Grid.Row="3" Background="White" CornerRadius="8" Padding="15" Margin="0,15,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="200"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="1">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Text="Netto:" HorizontalAlignment="Right"/>
                        <TextBlock Grid.Column="1" x:Name="txtNetto" Text="0,00 â‚¬" HorizontalAlignment="Right"/>
                        
                        <TextBlock Grid.Row="1" Text="MwSt.:" HorizontalAlignment="Right"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" x:Name="txtMwSt" Text="0,00 â‚¬" HorizontalAlignment="Right"/>
                        
                        <TextBlock Grid.Row="2" Text="Brutto:" FontWeight="Bold" HorizontalAlignment="Right"/>
                        <TextBlock Grid.Row="2" Grid.Column="1" x:Name="txtBrutto" Text="0,00 â‚¬" FontWeight="Bold" FontSize="16" HorizontalAlignment="Right"/>
                    </Grid>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Buttons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button Content="Abbrechen" Width="100" Height="35" IsCancel="True" Margin="0,0,10,0"/>
            <Button Content="Speichern" Width="120" Height="35" Click="BtnSpeichern_Click"
                    Style="{StaticResource PrimaryButton}"/>
        </StackPanel>
    </Grid>
</Window>
