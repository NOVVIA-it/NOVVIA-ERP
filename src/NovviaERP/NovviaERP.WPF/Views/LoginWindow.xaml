<Window x:Class="NovviaERP.WPF.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="NOVVIA ERP - Anmeldung" Height="680" Width="450"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize" WindowStyle="None"
        AllowsTransparency="True" Background="Transparent">
    
    <Border Background="White" CornerRadius="12" 
            BorderBrush="#E0E0E0" BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.3"/>
        </Border.Effect>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Header -->
            <Border Grid.Row="0" Background="{DynamicResource PrimaryBrush}" CornerRadius="12,12,0,0" Padding="30,25">
                <Grid>
                    <StackPanel>
                        <TextBlock Text="NOVVIA" FontSize="32" FontWeight="Light" Foreground="White"/>
                        <TextBlock Text="Enterprise Resource Planning" FontSize="12" Foreground="#B0D4F1"/>
                    </StackPanel>
                    
                    <!-- Schließen Button -->
                    <Button Content="✕" HorizontalAlignment="Right" VerticalAlignment="Top"
                            Width="30" Height="30" Background="Transparent" Foreground="White"
                            BorderThickness="0" FontSize="16" Cursor="Hand"
                            Click="BtnSchliessen_Click"/>
                </Grid>
            </Border>
            
            <!-- Login Form -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="30">
                
                <!-- Profil-Auswahl -->
                <TextBlock Text="Serverprofil" FontSize="12" Foreground="#666" Margin="0,0,0,5"/>
                <Grid Margin="0,0,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <ComboBox x:Name="cbProfil" Height="40" FontSize="14"
                              SelectionChanged="CbProfil_SelectionChanged">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Ellipse Width="8" Height="8" Fill="{Binding StatusFarbe}" 
                                             VerticalAlignment="Center" Margin="0,0,10,0"/>
                                    <TextBlock Text="{Binding Name}"/>
                                </StackPanel>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                    <Button Grid.Column="1" Content="⚙️" Width="40" Height="40" Margin="5,0,0,0"
                            ToolTip="Profile verwalten" Click="BtnProfileVerwalten_Click"/>
                </Grid>
                
                <!-- Mandant-Auswahl -->
                <TextBlock Text="Mandant" FontSize="12" Foreground="#666" Margin="0,0,0,5"/>
                <ComboBox x:Name="cbMandant" Height="40" FontSize="14" Margin="0,0,0,20"
                          DisplayMemberPath="Name"/>
                
                <!-- Benutzer -->
                <TextBlock Text="Benutzername" FontSize="12" Foreground="#666" Margin="0,0,0,5"/>
                <TextBox x:Name="txtBenutzer" Height="40" FontSize="14" Padding="10,8" Margin="0,0,0,15"
                         Text="{Binding LetzterBenutzer}"/>
                
                <!-- Passwort -->
                <TextBlock Text="Passwort" FontSize="12" Foreground="#666" Margin="0,0,0,5"/>
                <PasswordBox x:Name="txtPasswort" Height="40" FontSize="14" Padding="10,8" Margin="0,0,0,5"
                             KeyDown="TxtPasswort_KeyDown"/>
                
                <!-- Angemeldet bleiben -->
                <CheckBox x:Name="chkMerken" Content="Anmeldedaten merken" Margin="0,10,0,20"
                          IsChecked="True"/>
                
                <!-- Fehlermeldung -->
                <TextBlock x:Name="txtFehler" Foreground="#D32F2F" TextWrapping="Wrap" 
                           Margin="0,0,0,10" Visibility="Collapsed"/>
                
                <!-- Login Button -->
                <Button x:Name="btnLogin" Content="ANMELDEN" Height="50" FontSize="16" FontWeight="SemiBold"
                        Background="{DynamicResource PrimaryBrush}" Foreground="White" Margin="0,10,0,0"
                        Click="BtnLogin_DirectClick"/>
            </StackPanel>
            </ScrollViewer>
            
            <!-- Footer -->
            <Border Grid.Row="2" Background="#F5F5F5" CornerRadius="0,0,12,12" Padding="20,15">
                <Grid>
                    <TextBlock Text="© 2024 NOVVIA GmbH" FontSize="11" Foreground="#999"/>
                    <TextBlock Text="v2.0" FontSize="11" Foreground="#999" HorizontalAlignment="Right"/>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
