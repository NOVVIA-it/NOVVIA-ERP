<Page x:Class="NovviaERP.WPF.Views.WareneingangPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Wareneingang" Background="#f0f2f5">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
            <TextBlock Text="Wareneingang" FontSize="28" FontWeight="Bold" Foreground="#333"/>
            <TextBlock x:Name="txtInfo" Text="" FontSize="14" Foreground="#666" VerticalAlignment="Bottom" Margin="20,0,0,5"/>
        </StackPanel>

        <!-- Eingabebereich -->
        <Border Grid.Row="1" Background="White" CornerRadius="8" Padding="20" Margin="0,0,0,15">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.1"/>
            </Border.Effect>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Linke Spalte: Artikel -->
                <StackPanel Grid.Row="0" Grid.Column="0">
                    <TextBlock Text="Artikel scannen / suchen (PZN, EAN, Art-Nr)" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="txtArtikelSuche" Height="36" Padding="10,5" FontSize="16"
                                 KeyDown="TxtArtikelSuche_KeyDown" VerticalContentAlignment="Center"/>
                        <Button Grid.Column="1" Content="Suchen" Click="ArtikelSuchen_Click"
                                Padding="15,5" Margin="5,0,0,0" Background="{DynamicResource PrimaryBrush}" Foreground="White" BorderThickness="0"/>
                    </Grid>
                </StackPanel>

                <!-- Gefundener Artikel -->
                <Border Grid.Row="1" Grid.Column="0" Background="#f8f9fa" CornerRadius="4" Padding="10" Margin="0,10,0,0">
                    <StackPanel>
                        <TextBlock x:Name="txtArtikelNr" Text="Art-Nr: -" FontWeight="SemiBold"/>
                        <TextBlock x:Name="txtArtikelName" Text="Artikelname: -" TextWrapping="Wrap" Margin="0,3,0,0"/>
                        <TextBlock x:Name="txtArtikelBestand" Text="Bestand: -" Foreground="#666" Margin="0,3,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Menge -->
                <StackPanel Grid.Row="2" Grid.Column="0" Margin="0,15,0,0">
                    <TextBlock Text="Menge" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <TextBox x:Name="txtMenge" Text="1" Height="36" Width="120" HorizontalAlignment="Left"
                             Padding="10,5" FontSize="16" VerticalContentAlignment="Center"/>
                </StackPanel>

                <!-- Chargen-Nr und MHD -->
                <Grid Grid.Row="3" Grid.Column="0" Margin="0,15,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="10"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel>
                        <TextBlock Text="Chargen-Nr (optional)" FontWeight="SemiBold" Margin="0,0,0,5"/>
                        <TextBox x:Name="txtChargenNr" Height="32" Padding="8,5"/>
                    </StackPanel>
                    <StackPanel Grid.Column="2">
                        <TextBlock Text="MHD (optional)" FontWeight="SemiBold" Margin="0,0,0,5"/>
                        <DatePicker x:Name="dpMHD" Height="32"/>
                    </StackPanel>
                </Grid>

                <!-- Rechte Spalte: Lager -->
                <StackPanel Grid.Row="0" Grid.Column="2">
                    <TextBlock Text="Lager" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <ComboBox x:Name="cboLager" Height="36" DisplayMemberPath="CName"
                              SelectionChanged="Lager_SelectionChanged"/>
                </StackPanel>

                <StackPanel Grid.Row="1" Grid.Column="2" Margin="0,10,0,0">
                    <TextBlock Text="Lagerplatz" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <ComboBox x:Name="cboLagerplatz" Height="36" DisplayMemberPath="AnzeigeName"/>
                </StackPanel>

                <!-- Lieferschein-Nr -->
                <StackPanel Grid.Row="2" Grid.Column="2" Margin="0,15,0,0">
                    <TextBlock Text="Lieferschein-Nr (optional)" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <TextBox x:Name="txtLieferscheinNr" Height="32" Padding="8,5"/>
                </StackPanel>

                <!-- Kommentar -->
                <StackPanel Grid.Row="3" Grid.Column="2" Margin="0,15,0,0">
                    <TextBlock Text="Kommentar (optional)" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <TextBox x:Name="txtKommentar" Height="32" Padding="8,5"/>
                </StackPanel>

                <!-- Buttons -->
                <StackPanel Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="3"
                            Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                    <Button x:Name="btnLeeren" Content="Felder leeren" Click="Leeren_Click"
                            Padding="15,8" Margin="0,0,10,0"/>
                    <Button x:Name="btnBuchen" Content="Wareneingang buchen" Click="Buchen_Click"
                            Padding="20,10" Background="#28a745" Foreground="White" BorderThickness="0"
                            FontWeight="SemiBold" FontSize="14" IsEnabled="False"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Historie -->
        <Border Grid.Row="2" Background="White" CornerRadius="8" Padding="15">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.1"/>
            </Border.Effect>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock Text="Letzte Wareneingaenge" FontSize="16" FontWeight="SemiBold"/>
                    <Button Content="Aktualisieren" Click="Aktualisieren_Click"
                            Padding="10,3" Margin="15,0,0,0" FontSize="12"/>
                </StackPanel>

                <DataGrid x:Name="dgHistorie" Grid.Row="1" AutoGenerateColumns="False" IsReadOnly="True"
                          GridLinesVisibility="Horizontal" HeadersVisibility="Column"
                          BorderThickness="1" BorderBrush="#ddd"
                          RowBackground="White" AlternatingRowBackground="#fafafa">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Datum" Binding="{Binding DErstellt, StringFormat=dd.MM.yyyy HH:mm}" Width="130"/>
                        <DataGridTextColumn Header="Art-Nr" Binding="{Binding CArtNr}" Width="100"/>
                        <DataGridTextColumn Header="Artikel" Binding="{Binding CArtikelName}" Width="*"/>
                        <DataGridTextColumn Header="Menge" Binding="{Binding FAnzahl, StringFormat=N0}" Width="70">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Right"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Charge" Binding="{Binding CChargenNr}" Width="100"/>
                        <DataGridTextColumn Header="MHD" Binding="{Binding DMHD, StringFormat=dd.MM.yyyy}" Width="90"/>
                        <DataGridTextColumn Header="Lager" Binding="{Binding CLagerName}" Width="100"/>
                        <DataGridTextColumn Header="Kommentar" Binding="{Binding CKommentar}" Width="150"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>
    </Grid>
</Page>
