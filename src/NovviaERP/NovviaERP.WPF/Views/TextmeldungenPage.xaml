<UserControl x:Class="NovviaERP.WPF.Views.TextmeldungenPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#f0f2f5">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Background="White" BorderBrush="#ddd" BorderThickness="0,0,0,1" Padding="15,12">
            <TextBlock Text="Textmeldungen verwalten" FontSize="22" FontWeight="SemiBold"/>
        </Border>

        <!-- Aktionsleiste -->
        <Border Grid.Row="1" Background="#f8f9fa" Padding="15,10" BorderBrush="#ddd" BorderThickness="0,0,0,1">
            <StackPanel Orientation="Horizontal">
                <Button Content="+ Neue Meldung" Click="TextmeldungNeu_Click" Padding="15,8"
                        Background="{DynamicResource PrimaryBrush}" Foreground="White" BorderThickness="0" FontWeight="SemiBold" FontSize="13"/>
                <Button x:Name="btnBearbeiten" Content="Bearbeiten" Click="TextmeldungBearbeiten_Click"
                        Padding="12,8" Margin="10,0,0,0" IsEnabled="False"/>
                <Button x:Name="btnLoeschen" Content="Loeschen" Click="TextmeldungLoeschen_Click"
                        Padding="12,8" Margin="5,0,0,0" IsEnabled="False"/>
            </StackPanel>
        </Border>

        <!-- Meldungsliste als DataGrid -->
        <Border Grid.Row="2" Background="White" Margin="15">
            <DataGrid x:Name="dgTextmeldungen" BorderThickness="1" BorderBrush="#ddd"
                      AutoGenerateColumns="False" IsReadOnly="True" CanUserAddRows="False"
                      SelectionMode="Single" SelectionUnit="FullRow"
                      SelectionChanged="DgTextmeldungen_SelectionChanged"
                      MouseDoubleClick="DgTextmeldungen_DoubleClick">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID" Binding="{Binding KTextmeldung}" Width="60"/>
                    <DataGridTextColumn Header="Titel" Binding="{Binding CTitel}" Width="200"/>
                    <DataGridTextColumn Header="Text" Binding="{Binding CText}" Width="300"/>
                    <DataGridTextColumn Header="Typ" Binding="{Binding TypBezeichnung}" Width="100"/>
                    <DataGridTextColumn Header="Bereiche" Binding="{Binding BereicheText}" Width="150"/>
                    <DataGridTextColumn Header="Entity-Typ" Binding="{Binding CEntityTyp}" Width="100"/>
                    <DataGridTextColumn Header="Zuweisungen" Binding="{Binding ZuweisungenText}" Width="120"/>
                    <DataGridCheckBoxColumn Header="Aktiv" Binding="{Binding NAktiv}" Width="60"/>
                    <DataGridTextColumn Header="Prioritaet" Binding="{Binding NPrioritaet}" Width="80"/>
                    <DataGridTextColumn Header="Gueltig von" Binding="{Binding DGueltigVon, StringFormat=dd.MM.yyyy}" Width="100"/>
                    <DataGridTextColumn Header="Gueltig bis" Binding="{Binding DGueltigBis, StringFormat=dd.MM.yyyy}" Width="100"/>
                    <DataGridTextColumn Header="Erstellt" Binding="{Binding DErstellt, StringFormat=dd.MM.yyyy HH:mm}" Width="130"/>
                    <DataGridTextColumn Header="Erstellt von" Binding="{Binding CErstelltVon}" Width="100"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <!-- Leer-Hinweis -->
        <TextBlock x:Name="txtLeerHinweis" Grid.Row="2" Text="Keine Textmeldungen vorhanden. Klicken Sie auf '+ Neue Meldung' um eine anzulegen."
                   Foreground="#888" FontSize="14" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed"/>
    </Grid>
</UserControl>
