<UserControl x:Class="NovviaERP.WPF.Views.RetoureDetailView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#f0f2f5">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header mit Zurueck-Button -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Button Content="Zurueck" Padding="15,8" Click="BtnZurueck_Click" VerticalAlignment="Center"/>
            <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="20,0,0,0" VerticalAlignment="Center">
                <TextBlock x:Name="txtTitel" Text="Retoure" FontSize="28" FontWeight="Bold"/>
                <TextBlock x:Name="txtStatus" FontSize="16" VerticalAlignment="Bottom" Margin="15,0,0,5" Foreground="#666"/>
            </StackPanel>
            <StackPanel Grid.Column="2" Orientation="Horizontal">
                <Button Content="Speichern" Padding="15,8" Background="{DynamicResource PrimaryBrush}" Foreground="White" BorderThickness="0" Click="BtnSpeichern_Click" Margin="0,0,10,0"/>
                <Button x:Name="btnGutschrift" Content="Gutschrift erstellen" Padding="15,8" Click="BtnGutschrift_Click"/>
            </StackPanel>
        </Grid>

        <!-- Inhalt -->
        <TabControl Grid.Row="1" Margin="0,15,0,0">
            <!-- Uebersicht Tab -->
            <TabItem Header="Uebersicht">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <Grid Margin="20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Linke Spalte: Retoure-Daten -->
                        <Border Background="White" BorderBrush="#e0e0e0" BorderThickness="1" CornerRadius="4" Padding="15">
                            <StackPanel>
                                <TextBlock Text="Retoure-Daten" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,15"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Text="Retoure-Nr:" FontWeight="SemiBold" Margin="0,5"/>
                                    <TextBlock x:Name="txtRetoureNr" Grid.Column="1" Margin="0,5"/>

                                    <TextBlock Grid.Row="1" Text="Status:" FontWeight="SemiBold" Margin="0,5"/>
                                    <ComboBox x:Name="cmbStatus" Grid.Row="1" Grid.Column="1" Margin="0,3" Width="150" HorizontalAlignment="Left">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding CName}"/>
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>

                                    <TextBlock Grid.Row="2" Text="Erstellt:" FontWeight="SemiBold" Margin="0,5"/>
                                    <TextBlock x:Name="txtErstellt" Grid.Row="2" Grid.Column="1" Margin="0,5"/>

                                    <TextBlock Grid.Row="3" Text="Bearbeiter:" FontWeight="SemiBold" Margin="0,5"/>
                                    <TextBlock x:Name="txtBearbeiter" Grid.Row="3" Grid.Column="1" Margin="0,5"/>

                                    <TextBlock Grid.Row="4" Text="Warenlager:" FontWeight="SemiBold" Margin="0,5"/>
                                    <TextBlock x:Name="txtWarenlager" Grid.Row="4" Grid.Column="1" Margin="0,5"/>

                                    <TextBlock Grid.Row="5" Text="Ansprechpartner:" FontWeight="SemiBold" Margin="0,5"/>
                                    <TextBlock x:Name="txtAnsprechpartner" Grid.Row="5" Grid.Column="1" Margin="0,5"/>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Rechte Spalte: Kunde und Auftrag -->
                        <Border Grid.Column="2" Background="White" BorderBrush="#e0e0e0" BorderThickness="1" CornerRadius="4" Padding="15">
                            <StackPanel>
                                <TextBlock Text="Kunde &amp; Auftrag" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,15"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="100"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Text="Kunden-Nr:" FontWeight="SemiBold" Margin="0,5"/>
                                    <TextBlock x:Name="txtKundenNr" Grid.Column="1" Margin="0,5" Foreground="{DynamicResource PrimaryBrush}" Cursor="Hand" MouseLeftButtonUp="KundenNr_Click"/>

                                    <TextBlock Grid.Row="1" Text="Kunde:" FontWeight="SemiBold" Margin="0,5"/>
                                    <TextBlock x:Name="txtKundeName" Grid.Row="1" Grid.Column="1" Margin="0,5"/>

                                    <TextBlock Grid.Row="2" Text="Auftrag:" FontWeight="SemiBold" Margin="0,5"/>
                                    <TextBlock x:Name="txtAuftragNr" Grid.Row="2" Grid.Column="1" Margin="0,5" Foreground="{DynamicResource PrimaryBrush}" Cursor="Hand" MouseLeftButtonUp="AuftragNr_Click"/>

                                    <TextBlock Grid.Row="3" Text="Gutschrift:" FontWeight="SemiBold" Margin="0,5"/>
                                    <TextBlock x:Name="txtGutschriftNr" Grid.Row="3" Grid.Column="1" Margin="0,5" Foreground="{DynamicResource PrimaryBrush}" Cursor="Hand" MouseLeftButtonUp="GutschriftNr_Click"/>

                                    <TextBlock Grid.Row="4" Text="Korrektur:" FontWeight="SemiBold" Margin="0,5"/>
                                    <StackPanel Grid.Row="4" Grid.Column="1" Orientation="Horizontal">
                                        <TextBlock x:Name="txtKorrekturBetrag" Margin="0,5"/>
                                        <CheckBox x:Name="chkVersandkosten" Content="+ Versandkosten" Margin="15,5,0,5" IsEnabled="False"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Kommentare (volle Breite) -->
                        <Border Grid.Row="2" Grid.ColumnSpan="3" Background="White" BorderBrush="#e0e0e0" BorderThickness="1" CornerRadius="4" Padding="15">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel>
                                    <TextBlock Text="Externer Kommentar (fuer Kunde sichtbar)" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                    <TextBox x:Name="txtKommentarExtern" Height="80" TextWrapping="Wrap" AcceptsReturn="True"/>
                                </StackPanel>

                                <StackPanel Grid.Column="2">
                                    <TextBlock Text="Interner Kommentar" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                    <TextBox x:Name="txtKommentarIntern" Height="80" TextWrapping="Wrap" AcceptsReturn="True"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </Grid>
                </ScrollViewer>
            </TabItem>

            <!-- Positionen Tab -->
            <TabItem Header="Positionen">
                <Grid Margin="15">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <DataGrid x:Name="dgPositionen" AutoGenerateColumns="False" IsReadOnly="True"
                              CanUserAddRows="False" SelectionMode="Single">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Art.-Nr." Binding="{Binding CArtNr}" Width="120"/>
                            <DataGridTextColumn Header="Artikel" Binding="{Binding CName}" Width="300"/>
                            <DataGridTextColumn Header="Menge" Binding="{Binding FAnzahl, StringFormat=N0}" Width="70"/>
                            <DataGridTextColumn Header="Rueckgabegrund" Binding="{Binding CGrund}" Width="150"/>
                            <DataGridTextColumn Header="Grund-Kommentar" Binding="{Binding CGrundKommentar}" Width="150"/>
                            <DataGridTextColumn Header="Zustand" Binding="{Binding CZustand}" Width="100"/>
                            <DataGridTextColumn Header="Zustand-Kommentar" Binding="{Binding CZustandKommentar}" Width="150"/>
                            <DataGridCheckBoxColumn Header="Gutschr." Binding="{Binding NGutschreiben}" Width="60"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>
