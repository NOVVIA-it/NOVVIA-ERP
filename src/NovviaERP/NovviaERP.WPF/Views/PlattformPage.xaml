<Page x:Class="NovviaERP.WPF.Views.PlattformPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Plattformen">
    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <!-- Linke Spalte: Plattform-Liste -->
        <Border Grid.Column="0" Background="White" CornerRadius="8" Margin="0,0,15,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <Border Grid.Row="0" Background="#F5F5F5" Padding="15" CornerRadius="8,8,0,0">
                    <TextBlock Text="ðŸª VerkaufskanÃ¤le" FontSize="16" FontWeight="SemiBold"/>
                </Border>
                
                <ListBox Grid.Row="1" x:Name="lstPlattformen" BorderThickness="0"
                         SelectionChanged="LstPlattformen_SelectionChanged">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Border Padding="12" BorderBrush="#EEE" BorderThickness="0,0,0,1">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <Ellipse Width="10" Height="10" Fill="{Binding StatusFarbe}" 
                                             VerticalAlignment="Center" Margin="0,0,12,0"/>
                                    
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>
                                        <TextBlock Text="{Binding TypName}" FontSize="11" Foreground="#666"/>
                                    </StackPanel>
                                    
                                    <TextBlock Grid.Column="2" Text="{Binding LetzterSyncText}" 
                                               FontSize="10" Foreground="#999" VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                
                <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="10">
                    <Button Content="+ Neu" Width="70" Height="30" Click="BtnNeu_Click"/>
                    <Button Content="ðŸ—‘ï¸" Width="35" Height="30" Margin="5,0,0,0" Click="BtnLoeschen_Click"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Rechte Spalte: Details -->
        <TabControl Grid.Column="1" x:Name="tabDetails">
            <!-- Allgemein -->
            <TabItem Header="Allgemein">
                <ScrollViewer Padding="20">
                    <StackPanel MaxWidth="600">
                        <TextBlock Text="Grundeinstellungen" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,15"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <TextBlock Text="Name:" VerticalAlignment="Center"/>
                            <TextBox Grid.Column="1" x:Name="txtName" Margin="0,0,0,10"/>
                            
                            <TextBlock Grid.Row="1" Text="Typ:" VerticalAlignment="Center"/>
                            <ComboBox Grid.Row="1" Grid.Column="1" x:Name="cbTyp" Margin="0,0,0,10">
                                <ComboBoxItem Content="WooCommerce" Tag="1"/>
                                <ComboBoxItem Content="Shopify" Tag="2"/>
                                <ComboBoxItem Content="Magento" Tag="3"/>
                                <ComboBoxItem Content="Shopware" Tag="4"/>
                                <ComboBoxItem Content="Amazon" Tag="10"/>
                                <ComboBoxItem Content="eBay" Tag="11"/>
                                <ComboBoxItem Content="Custom API" Tag="99"/>
                            </ComboBox>
                            
                            <TextBlock Grid.Row="2" Text="Shop-URL:" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="2" Grid.Column="1" x:Name="txtUrl" Margin="0,0,0,10"/>
                            
                            <TextBlock Grid.Row="3" Text="Aktiv:" VerticalAlignment="Center"/>
                            <CheckBox Grid.Row="3" Grid.Column="1" x:Name="chkAktiv" Margin="0,0,0,10"/>
                        </Grid>
                        
                        <TextBlock Text="API-Zugangsdaten" FontSize="16" FontWeight="SemiBold" Margin="0,20,0,15"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <TextBlock Text="API-Key:" VerticalAlignment="Center"/>
                            <TextBox Grid.Column="1" x:Name="txtApiKey" Margin="0,0,0,10"/>
                            
                            <TextBlock Grid.Row="1" Text="API-Secret:" VerticalAlignment="Center"/>
                            <PasswordBox Grid.Row="1" Grid.Column="1" x:Name="txtApiSecret" Margin="0,0,0,10"/>
                            
                            <TextBlock Grid.Row="2" Text="Benutzername:" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="2" Grid.Column="1" x:Name="txtUser" Margin="0,0,0,10"/>
                            
                            <TextBlock Grid.Row="3" Text="Passwort:" VerticalAlignment="Center"/>
                            <PasswordBox Grid.Row="3" Grid.Column="1" x:Name="txtPass" Margin="0,0,0,10"/>
                        </Grid>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                            <Button Content="ðŸ”Œ Verbindung testen" Width="150" Height="35" Click="BtnTestVerbindung_Click"/>
                            <TextBlock x:Name="txtTestErgebnis" VerticalAlignment="Center" Margin="15,0,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <!-- Synchronisation -->
            <TabItem Header="Synchronisation">
                <ScrollViewer Padding="20">
                    <StackPanel MaxWidth="600">
                        <TextBlock Text="Sync-Einstellungen" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,15"/>
                        
                        <CheckBox x:Name="chkAutoSync" Content="Automatische Synchronisation" Margin="0,0,0,10"/>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                            <TextBlock Text="Intervall:" VerticalAlignment="Center" Width="150"/>
                            <TextBox x:Name="txtIntervall" Width="60" Text="15"/>
                            <TextBlock Text="Minuten" VerticalAlignment="Center" Margin="10,0,0,0"/>
                        </StackPanel>
                        
                        <TextBlock Text="Was synchronisieren:" FontWeight="SemiBold" Margin="0,10,0,10"/>
                        <CheckBox Content="Bestellungen importieren" IsChecked="True" Margin="0,0,0,5"/>
                        <CheckBox Content="LagerbestÃ¤nde exportieren" IsChecked="True" Margin="0,0,0,5"/>
                        <CheckBox Content="Preise exportieren" IsChecked="True" Margin="0,0,0,5"/>
                        <CheckBox Content="Artikel exportieren" Margin="0,0,0,5"/>
                        <CheckBox Content="Tracking-Nummern exportieren" IsChecked="True" Margin="0,0,0,5"/>
                        
                        <TextBlock Text="Letzter Sync" FontSize="16" FontWeight="SemiBold" Margin="0,30,0,15"/>
                        <TextBlock x:Name="txtLetzterSync" Text="Noch nie synchronisiert" Foreground="#666"/>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                            <Button Content="ðŸ”„ Jetzt synchronisieren" Width="160" Height="35" Click="BtnSync_Click"/>
                            <Button Content="ðŸ“‹ Sync-Log" Width="100" Height="35" Margin="10,0,0,0" Click="BtnSyncLog_Click"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <!-- Artikel-Zuordnung -->
            <TabItem Header="Artikel">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                        <TextBox x:Name="txtArtikelSuche" Width="300" Tag="Artikel suchen..."/>
                        <Button Content="Suchen" Width="80" Margin="10,0,0,0"/>
                        <Button Content="Alle zuordnen" Width="100" Margin="10,0,0,0"/>
                    </StackPanel>
                    
                    <DataGrid Grid.Row="1" x:Name="dgArtikelPlattform" AutoGenerateColumns="False">
                        <DataGrid.Columns>
                            <DataGridCheckBoxColumn Header="Aktiv" Binding="{Binding Aktiv}" Width="50"/>
                            <DataGridTextColumn Header="Art.Nr." Binding="{Binding ArtNr}" Width="100"/>
                            <DataGridTextColumn Header="Name (Stamm)" Binding="{Binding NameStamm}" Width="200"/>
                            <DataGridTextColumn Header="Name (Plattform)" Binding="{Binding Name}" Width="200"/>
                            <DataGridTextColumn Header="Externe ID" Binding="{Binding ExterneId}" Width="100"/>
                            <DataGridTextColumn Header="Preis" Binding="{Binding Preis, StringFormat=N2}" Width="80"/>
                            <DataGridCheckBoxColumn Header="Lager-Sync" Binding="{Binding LagerSync}" Width="80"/>
                            <DataGridCheckBoxColumn Header="Preis-Sync" Binding="{Binding PreisSync}" Width="80"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Page>
