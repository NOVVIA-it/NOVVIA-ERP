<Window x:Class="NovviaERP.WPF.Views.KundeneinzelpreisDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Kundeneinzelpreis" Height="650" Width="600" MinHeight="550" MinWidth="500"
        WindowStartupLocation="CenterOwner" ResizeMode="CanResize"
        Background="#f5f5f5">
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <!-- Row 0: Header, Row 1: Kunde, Row 2: Grundpreis, Row 3: Staffelpreise, Row 4: Buttons -->

        <!-- Header -->
        <TextBlock x:Name="txtHeader" Text="Individuelle Preise festlegen" FontSize="16" FontWeight="SemiBold"
                   Foreground="#0078D4" Margin="0,0,0,15"/>

        <!-- Kundenauswahl -->
        <GroupBox Header="Kunde" Grid.Row="1" Padding="10" Margin="0,0,0,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30"/>
                    <RowDefinition Height="30"/>
                </Grid.RowDefinitions>

                <TextBlock Text="Kunde:" VerticalAlignment="Center"/>
                <TextBox x:Name="txtKundeName" Grid.Column="1" IsReadOnly="True" Height="24"/>
                <Button x:Name="btnKundeAuswaehlen" Content="..." Grid.Column="2" Width="30" Height="24"
                        Margin="5,0,0,0" Click="BtnKundeAuswaehlen_Click"/>

                <TextBlock Text="Kunden-Nr.:" Grid.Row="1" VerticalAlignment="Center"/>
                <TextBox x:Name="txtKundenNr" Grid.Row="1" Grid.Column="1" IsReadOnly="True" Height="24"/>
            </Grid>
        </GroupBox>

        <!-- Preiseinstellung -->
        <GroupBox Header="Verkaufspreis festlegen (Grundpreis)" Grid.Row="2" Padding="10" Margin="0,0,0,10">
            <StackPanel>
                <RadioButton x:Name="rbStandardPreis" Content="Entspricht Standard-VK des Artikels"
                             Checked="PreisTyp_Changed" Margin="0,0,0,8"/>
                <RadioButton x:Name="rbFestpreis" Content="Individueller Festpreis"
                             Checked="PreisTyp_Changed" Margin="0,0,0,8"/>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                    <RadioButton x:Name="rbProzent" Content="Standard-VK verringern um %"
                                 Checked="PreisTyp_Changed"/>
                    <TextBox x:Name="txtProzent" Width="60" Height="24" Margin="10,0,0,0"
                             TextChanged="TxtProzent_TextChanged"/>
                </StackPanel>

                <Grid Margin="0,15,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="100"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="30"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="Brutto:" FontWeight="SemiBold"/>
                    <TextBox x:Name="txtBrutto" Grid.Row="1" Height="24" TextChanged="TxtBrutto_TextChanged"/>

                    <TextBlock Text="Netto:" Grid.Column="2" FontWeight="SemiBold"/>
                    <TextBox x:Name="txtNetto" Grid.Row="1" Grid.Column="2" Height="24" TextChanged="TxtNetto_TextChanged"/>
                </Grid>
            </StackPanel>
        </GroupBox>

        <!-- Staffelpreise -->
        <GroupBox Header="Staffelpreise" Grid.Row="3" Padding="10" Margin="0,0,0,10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <DataGrid x:Name="dgStaffelpreise" AutoGenerateColumns="False" IsReadOnly="False"
                          CanUserAddRows="False" CanUserDeleteRows="False" SelectionMode="Single"
                          RowHeight="24" HeadersVisibility="Column" BorderBrush="#ddd" BorderThickness="1"
                          MinHeight="100" MaxHeight="200">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Ab Menge" Binding="{Binding NAnzahlAb, UpdateSourceTrigger=PropertyChanged}" Width="80"/>
                        <DataGridTextColumn Header="Brutto" Binding="{Binding FBrutto, StringFormat=N2, UpdateSourceTrigger=PropertyChanged}" Width="100"/>
                        <DataGridTextColumn Header="Netto-VK" Binding="{Binding FNettoPreis, StringFormat=N4, UpdateSourceTrigger=PropertyChanged}" Width="100"/>
                        <DataGridTextColumn Header="% Rabatt" Binding="{Binding FProzent, StringFormat=N2, UpdateSourceTrigger=PropertyChanged}" Width="80"/>
                    </DataGrid.Columns>
                </DataGrid>

                <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,8,0,0">
                    <Button Content="Anlegen" Click="BtnStaffelAnlegen_Click" Padding="15,5"/>
                    <Button Content="Loeschen" Click="BtnStaffelLoeschen_Click" Padding="15,5" Margin="10,0,0,0"/>
                </StackPanel>
            </Grid>
        </GroupBox>

        <!-- Buttons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="Speichern" Click="BtnSpeichern_Click" Padding="25,8" Margin="0,0,10,0"
                    Background="#0078D4" Foreground="White" BorderThickness="0"/>
            <Button Content="Abbrechen" Click="BtnAbbrechen_Click" Padding="15,8" IsCancel="True"/>
        </StackPanel>
    </Grid>
</Window>
